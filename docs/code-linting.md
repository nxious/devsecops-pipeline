# Code Linting

## Objective

This section aims to accomplish the objective listed as 9<sup>th</sup> point of [`Task 2`](../problem-statement/#task-2) under the [Problem Statement](../problem-statement).

In this section, we will be installing and configuring a linting tool for our application.

## What is linting?

Linting is a static code quality analysis process that allows us to flag programming errors, bugs, stylistic errors, and suspicious constructs. Linting your code improves its readability, removes any silly mistakes before execution, and allows for a more comfortable code review.

Our application will go through the linting process in the final stages before being deployed to the application/production server.

## [ESLint](https://eslint.org/){target="_blank"}

The tool we will be using for linting the source code of our application is called ESLint. It is an open-source linting utility and is used to determine the errors and mistakes present in the source code.

### Installtion

ESLint is available as an [npm module](https://www.npmjs.com/package/eslint){target="_blank"} and can be installed using the command:

```
npm install eslint -g
```

**Note:** Since our application is written using Node.js v8, we will be installing an older version of ESLint, v6.8.0, which was the last version that supported Node.js v8. To install the older version, we will mention `@6.8.0` next to the package name (eslint) while using `npm install.`

### Configuration

Once ESLint is installed, we need to run the tool with the `--init` flag in the application’s root directory to generate an initial configuration for linting, as stated in the [getting started](https://eslint.org/docs/user-guide/getting-started){target=”_blank”} guide for ESLint. The configuration file is generated with the name `.eslintrc.json` and contains the configuration and parameters for scanning the code. Various options for configuring the tool according to our needs can be found [here](https://eslint.org/docs/user-guide/configuring/){target="_blank"}.

We will be using ESLint on the default configuration with the following arguments:

```
eslint --ext .js,.ejs -o ~/reports/eslint.json ./
```

- `--ext`: Specifies the extension of the file to be checked. Our application has `.js` as well as `.ejs` file.
- `-o’: Specifies the output location and extension of the report.
- `./`: Specifies the directory to be scanned. `./` refers to the current directory.

This command will be placed in a bash script just like previous scripts as ESLint outputs a non-zero exit code if any errors are found, which may cause pipeline interruption during its execution.

The contents of `eslint.sh` will be as follows:

```
#!/bin/bash
eslint --ext .js,.ejs -o ~/reports/eslint.json ./
exit 0
```

We will include the execution of this script as a stage in our jenkinsfile.

The structure of the `Linting code with ESLint` stage is as follows:

```
stage ('Linting code with ESLint') {
    steps {
        sh 'bash ~/scripts/eslint.sh'
    }
}
```

### ESLint Report Analysis

The report generated by ESLint consists of various types of errors detected in the source code. It detects a total of 164 problems with the application code of various types in the report.

This report is stored in `JSON` format under the `reports` folder located in the default home directory of the Jenkins user at `/var/lib/jenkins.`

The full report generated by ESLint can be accessed [here](reports/eslint.json){target="_blank"}.